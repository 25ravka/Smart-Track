<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            overflow-x: hidden;
            color: #333;
        }

        /* Hover trigger area */
        .hover-trigger {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 100vh;
            z-index: 1002;
            background-color: transparent;
        }

        /* Side Menu */
        .side-menu {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100vh;
            background: #f0f0f0;
            transition: left 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }

        .side-menu.open {
            left: 0;
        }

        .menu-item {
            padding: 25px 20px;
            text-align: center;
            color: white;
            font-weight: 500;
            font-size: 16px;
            border-bottom: 1px solid #666;
            cursor: pointer;
            transition: background-color 0.3s;
            background-color: #888;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-item:hover {
            background-color: #666;
        }

        .menu-item.active {
            background-color: #888;
            color: white;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
            z-index: 999;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Main Content */
        .main-content {
            padding: 0;
            background-color: #000;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .content-wrapper {
            background-color: #fff;
            margin: 0;
            padding: 0;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .top-section {
            display: flex;
            height: 600px;
        }

        /* Clients Section */
        .clients-section {
            width: 240px;
            background-color: #f0f0f0;
            border: 3px solid #000;
            display: flex;
            flex-direction: column;
        }

        .clients-header {
            background-color: #ddd;
            padding: 10px 15px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 2px solid #000;
            color: #333;
            flex-shrink: 0;
            position: relative;
        }

        .client-rows {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            flex: 1;
        }

        .client-rows::-webkit-scrollbar {
            width: 8px;
        }

        .client-rows::-webkit-scrollbar-track {
            background: #f0f0f0;
        }

        .client-rows::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        .client-rows::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .client-row {
            height: 45px;
            border-bottom: 2px solid #000;
            background-color: #f0f0f0;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            padding-left: 15px;
            color: #333;
            position: relative;
        }

        .client-row:hover {
            background-color: #e0e0e0;
        }

        .client-row.selected {
            background-color: #ccc;
        }

        .order-count {
            position: absolute;
            right: 10px;
            background-color: #2196F3;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .discount-eligible {
            background-color: #4CAF50 !important;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            70% { box-shadow: 0 0 0 5px rgba(76, 175, 80, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }

        /* Right Content */
        .right-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            gap: 20px;
        }

        .business-section {
            display: flex;
            gap: 20px;
            height: 80px;
        }

        .business-name {
            background-color: #999;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding-left: 20px;
            color: white;
            font-size: 18px;
            font-weight: normal;
        }

        .discount-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 120px;
        }

        .discount-label {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background-color: #ff4444;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .toggle-switch.active {
            background-color: #4CAF50;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 21px;
            height: 21px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(25px);
        }

        /* Analysis Section */
        .analysis-section {
            display: flex;
            gap: 20px;
            flex: 1;
        }

        .analysis-box, .profitability-box {
            flex: 1;
            background-color: #999;
            color: white;
            padding: 20px;
            text-align: left;
            font-size: 14px;
            font-weight: normal;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
        }

        .analysis-title, .profitability-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            width: 100%;
        }

        .analysis-content, .profitability-content {
            line-height: 1.5;
        }

        .metric {
            margin-bottom: 10px;
        }

        .positive {
            color: #128616;
            font-weight: bold;
        }

        .negative {
            color: #ec0606;
            font-weight: bold;
        }

        .next-discount {
            color: #FFD700;
            font-weight: bold;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .top-section {
                flex-direction: column;
                height: auto;
            }
            
            .clients-section {
                width: 100%;
                height: 300px;
            }
            
            .business-section {
                flex-direction: column;
                height: auto;
            }
            
            .analysis-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Hover trigger area -->
    <div class="hover-trigger"></div>
    
    <!-- Overlay -->
    <div class="overlay"></div>

    <!-- Side Menu -->
    <div class="side-menu">
        <div class="menu-item" onclick="navigateTo('homepage.html')">Home</div>
        <div class="menu-item" onclick="navigateTo('inventory.html')">Inventory</div>
        <div class="menu-item" onclick="navigateTo('client record.html')">Client Records</div>
        <div class="menu-item" onclick="navigateTo('progress check.html')">Progress Check</div>
        <div class="menu-item active" onclick="navigateTo('loyalty.html')">Loyalty Program</div>
        <div class="menu-item" onclick="exitApp()">Exit App</div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="content-wrapper">
            <div class="top-section">
                <!-- Clients Section -->
                <div class="clients-section">
                    <div class="clients-header">
                        Clients
                    </div>
                    <div class="client-rows" id="clientRows">
                        <div class="client-row" onclick="selectClient('ABC Corporation')">
                            ABC Corporation
                            <div class="order-count">7</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Tech Solutions Ltd')">
                            Tech Solutions Ltd
                            <div class="order-count">3</div>
                        </div>
                        <div class="client-row discount-eligible" onclick="selectClient('Green Energy Co')">
                            Green Energy Co
                            <div class="order-count discount-eligible">5</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Digital Marketing Inc')">
                            Digital Marketing Inc
                            <div class="order-count">12</div>
                        </div>
                        <div class="client-row discount-eligible" onclick="selectClient('Food Services LLC')">
                            Food Services LLC
                            <div class="order-count discount-eligible">10</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Construction Group')">
                            Construction Group
                            <div class="order-count">1</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Medical Center')">
                            Medical Center
                            <div class="order-count">8</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Auto Repair Shop')">
                            Auto Repair Shop
                            <div class="order-count">4</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Fashion Boutique')">
                            Fashion Boutique
                            <div class="order-count">6</div>
                        </div>
                        <div class="client-row discount-eligible" onclick="selectClient('Coffee House')">
                            Coffee House
                            <div class="order-count discount-eligible">15</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Fitness Gym')">
                            Fitness Gym
                            <div class="order-count">2</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Pet Store')">
                            Pet Store
                            <div class="order-count">9</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Bookstore')">
                            Bookstore
                            <div class="order-count">11</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Electronics Store')">
                            Electronics Store
                            <div class="order-count">13</div>
                        </div>
                        <div class="client-row discount-eligible" onclick="selectClient('Real Estate Agency')">
                            Real Estate Agency
                            <div class="order-count discount-eligible">20</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Law Firm')">
                            Law Firm
                            <div class="order-count">16</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Accounting Services')">
                            Accounting Services
                            <div class="order-count">18</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Travel Agency')">
                            Travel Agency
                            <div class="order-count">14</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Photography Studio')">
                            Photography Studio
                            <div class="order-count">17</div>
                        </div>
                        <div class="client-row" onclick="selectClient('Cleaning Services')">
                            Cleaning Services
                            <div class="order-count">19</div>
                        </div>
                    </div>
                </div>

                <!-- Right Content -->
                <div class="right-content">
                    <div class="business-section">
                        <div class="business-name" id="businessNameDisplay">Business Name: &nbsp;<span id="selectedBusiness">Select a client</span></div>
                        <div class="discount-section">
                            <div class="discount-label">Discount</div>
                            <div class="toggle-switch" id="discountToggle">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Analysis Section -->
                    <div class="analysis-section">
                        <div class="analysis-box">
                            <div class="analysis-title">Loyalty Program Analysis</div>
                            <div class="analysis-content" id="analysisContent">
                                Select a client to view their loyalty program analysis
                            </div>
                        </div>
                        <div class="profitability-box">
                            <div class="profitability-title">Order Count & Discounts</div>
                            <div class="profitability-content" id="profitabilityContent">
                                Select a client to view order count and discount eligibility
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let hoverTimeout;
        let selectedClientRow = null;

        // Order count data for each business
        const orderCounts = {
            'ABC Corporation': 7,
            'Tech Solutions Ltd': 3,
            'Green Energy Co': 5,
            'Digital Marketing Inc': 12,
            'Food Services LLC': 10,
            'Construction Group': 1,
            'Medical Center': 8,
            'Auto Repair Shop': 4,
            'Fashion Boutique': 6,
            'Coffee House': 15,
            'Fitness Gym': 2,
            'Pet Store': 9,
            'Bookstore': 11,
            'Electronics Store': 13,
            'Real Estate Agency': 20,
            'Law Firm': 16,
            'Accounting Services': 18,
            'Travel Agency': 14,
            'Photography Studio': 17,
            'Cleaning Services': 19
        };

        // Check if business is eligible for discount (multiples of 5)
        function isEligibleForDiscount(orderCount) {
            return orderCount > 0 && orderCount % 5 === 0;
        }

        // Calculate next discount milestone
        function getNextDiscount(orderCount) {
            return Math.ceil(orderCount / 5) * 5;
        }

        // Navigation function
        function navigateTo(page) {
            window.location.href = page;
        }

        // Exit app function
        function exitApp() {
            window.open('https://www.google.com', '_blank');
        }

        function selectClient(businessName) {
            // Update the business name display
            document.getElementById('selectedBusiness').textContent = businessName;
            
            // Remove previous selection
            if (selectedClientRow) {
                selectedClientRow.classList.remove('selected');
            }
            
            // Add selection to clicked row
            selectedClientRow = event.target.closest('.client-row');
            selectedClientRow.classList.add('selected');

            const orderCount = orderCounts[businessName] || 0;
            const isEligible = isEligibleForDiscount(orderCount);
            const nextDiscount = getNextDiscount(orderCount);
            const ordersUntilDiscount = nextDiscount - orderCount;

            // Update discount toggle based on eligibility
            const discountToggle = document.getElementById('discountToggle');
            if (isEligible) {
                discountToggle.classList.add('active');
            } else {
                discountToggle.classList.remove('active');
            }

            // Update analysis section
            const analysisContent = document.getElementById('analysisContent');
            analysisContent.innerHTML = `
                <div class="metric">Current Orders: <span class="positive">${orderCount}</span></div>
                <div class="metric">Discount Status: <span class="${isEligible ? 'positive' : 'negative'}">${isEligible ? 'ELIGIBLE' : 'Not Eligible'}</span></div>
                <div class="metric">Program: 10% discount every 5th order</div>
                <div class="metric">Last Discount: ${orderCount >= 5 ? `Order #${Math.floor(orderCount / 5) * 5}` : 'None yet'}</div>
                <div class="metric">Total Discounts Earned: <span class="positive">${Math.floor(orderCount / 5)}</span></div>
                <div class="metric">Customer Loyalty Level: <span class="${orderCount >= 15 ? 'positive' : orderCount >= 10 ? 'next-discount' : 'negative'}">${orderCount >= 20 ? 'VIP' : orderCount >= 15 ? 'Gold' : orderCount >= 10 ? 'Silver' : orderCount >= 5 ? 'Bronze' : 'New'}</span></div>
                <div class="metric">Average Orders/Month: ${Math.max(1, Math.floor(orderCount / 3))}</div>
                <div class="metric">Estimated Annual Orders: ${orderCount * 4}</div>
            `;

            // Update order count and discount section
            const profitabilityContent = document.getElementById('profitabilityContent');
            if (isEligible) {
                profitabilityContent.innerHTML = `
                    <div class="metric">ðŸŽ‰ <span class="positive">DISCOUNT AVAILABLE!</span></div>
                    <div class="metric">Current Order Count: <span class="positive">${orderCount}</span></div>
                    <div class="metric">Discount: <span class="positive">10% OFF next order</span></div>
                    <div class="metric">Milestone Reached: <span class="positive">Order #${orderCount}</span></div>
                    <div class="metric">Next Discount at: Order #${nextDiscount + 5}</div>
                    <div class="metric">Orders until next: <span class="next-discount">${5} more orders</span></div>
                    <div class="metric">Total Saved: ~$${(Math.floor(orderCount / 5) * 50).toLocaleString()}</div>
                    <div class="metric">Loyalty Score: <span class="positive">${Math.min(100, orderCount * 4)}%</span></div>
                `;
            } else {
                profitabilityContent.innerHTML = `
                    <div class="metric">Current Order Count: <span class="next-discount">${orderCount}</span></div>
                    <div class="metric">Next Discount at: Order #<span class="positive">${nextDiscount}</span></div>
                    <div class="metric">Orders until discount: <span class="next-discount">${ordersUntilDiscount} more orders</span></div>
                    <div class="metric">Progress: <span class="positive">${Math.floor((orderCount % 5) * 20)}%</span> to next discount</div>
                    <div class="metric">Discounts Earned: <span class="positive">${Math.floor(orderCount / 5)}</span></div>
                    <div class="metric">Potential Annual Savings: $${(Math.floor(orderCount * 4 / 5) * 50).toLocaleString()}</div>
                    <div class="metric">Loyalty Score: <span class="${orderCount >= 10 ? 'positive' : 'next-discount'}">${Math.min(100, orderCount * 4)}%</span></div>
                    <div class="metric">Keep ordering to unlock discounts!</div>
                `;
            }
        }

        // Handle hover trigger for sidebar
        const hoverTrigger = document.querySelector('.hover-trigger');
        const sidebar = document.querySelector('.side-menu');
        const overlay = document.querySelector('.overlay');

        hoverTrigger.addEventListener('mouseenter', function() {
            clearTimeout(hoverTimeout);
            sidebar.classList.add('open');
            overlay.classList.add('active');
        });

        sidebar.addEventListener('mouseenter', function() {
            clearTimeout(hoverTimeout);
        });

        sidebar.addEventListener('mouseleave', function() {
            hoverTimeout = setTimeout(() => {
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
            }, 300);
        });

        hoverTrigger.addEventListener('mouseleave', function() {
            hoverTimeout = setTimeout(() => {
                if (!sidebar.matches(':hover')) {
                    sidebar.classList.remove('open');
                    overlay.classList.remove('active');
                }
            }, 100);
        });

        // Initialize display
        document.addEventListener('DOMContentLoaded', function() {
            // Optional: Auto-select first eligible client for demonstration
            // selectClient('Green Energy Co');
        });
    </script>
</body>
</html>
